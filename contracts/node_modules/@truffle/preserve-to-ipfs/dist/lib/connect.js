"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.connect = void 0;
const ipfs_http_client_1 = __importDefault(require("ipfs-http-client"));
async function* connect(options) {
    const { address: url, controls } = options;
    const { step } = controls;
    const task = yield* step({
        message: `Connecting to IPFS node at ${url}...`
    });
    const ipfs = ipfs_http_client_1.default({ url });
    try {
        const version = await ipfs.version();
        yield* task.succeed({
            result: version,
            message: `Connected to IPFS node at ${url}`
        });
    }
    catch (error) {
        yield* task.fail({ error });
        return;
    }
    return ipfs;
}
exports.connect = connect;
//# sourceMappingURL=connect.js.map